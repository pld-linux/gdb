https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=190810


2006-09-26  Jan Kratochvil  <jan.kratochvil@redhat.com>

	* remote.c (remote_wait): Suggestion on crash due to nonmatching target.
	(remote_async_wait): Likewise.


Index: gdb-6.8.50.20081128/gdb/remote.c
===================================================================
--- gdb-6.8.50.20081128.orig/gdb/remote.c	2008-12-09 16:59:51.000000000 +0100
+++ gdb-6.8.50.20081128/gdb/remote.c	2008-12-09 17:00:04.000000000 +0100
@@ -4329,8 +4329,13 @@ Packet: '%s'\n"),
 		VEC_safe_push (cached_reg_t, event->regcache, &cached_reg);
 	      }
 
-	    if (*p != ';')
-	      error (_("Remote register badly formatted: %s\nhere: %s"),
+	    /* It may also occur on amd64 which defaults to 32-bit i386
+	       target.  gdbserver(1) is not aware of the `set architecture'
+	       name itself as it is not using libbfd.  */
+	    if (*p != ';')
+	      error (_("Remote register badly formatted: %s\nhere: %s"
+		       "\nTry to load the executable by `file' first,"
+		       "\nyou may also check `set/show architecture'."),
 		     buf, p);
 	    ++p;
 	  }
